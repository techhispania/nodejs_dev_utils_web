<div class="container mt-4">
    
    <a href="/" class="mt-3 mb-3 btn btn-primary" id="back-btn"><i class="bi bi-arrow-left"></i> Back</a>

    <h2>{{{title}}}</h2>

    <form id="jsonForm">
        <div class="mb-3">
            <label for="jsonInput" class="form-label">Enter JSON:</label>
            <textarea class="form-control" id="jsonInput" rows="10" placeholder='Paste your JSON here'></textarea>
        </div>

        <button type="button" class="btn btn-primary" id="beautifyBtn">Beautify JSON</button>
    </form>

    <div class="mt-3">
        <label for="jsonOutput" class="form-label">Beautified JSON:</label>
        <textarea class="form-control mb-3" id="jsonOutput" rows="10" readonly></textarea>

        <button class="btn btn-secondary d-flex align-items-center" type="button" id="copyBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy me-1" viewBox="0 0 16 16">
                <path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
            </svg>
            Copy
        </button>
    </div>
</div>
<script>
    const beautifyBtn = document.getElementById('beautifyBtn')
    const jsonInput = document.getElementById('jsonInput')
    const jsonOutput = document.getElementById('jsonOutput')
    const copyBtn = document.getElementById('copyBtn')

    beautifyBtn.addEventListener("click", () => {
        try {
            const obj = JSON.parse(jsonInput.value)
            const pretty = JSON.stringify(obj, null, 2) // 2-space indentation
            jsonOutput.value = pretty
        } catch (err) {
            alert("Invalid JSON: " + err.message)
        }
    })

    copyBtn.addEventListener("click", () => {
        jsonOutput.select()
        navigator.clipboard.writeText(jsonOutput.value)
        
        // Change Copy button text
        const originalHTML = copyBtn.innerHTML; // keep the icon
        copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy me-1" viewBox="0 0 16 16"><path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/></svg> Copied';

        // Reset Copy button text after 2 seconds
        setTimeout(() => {
            copyBtn.innerHTML = originalHTML;
        }, 2000);
    })
</script>